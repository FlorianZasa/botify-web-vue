(function(e){function t(t){for(var o,n,s=t[0],i=t[1],l=t[2],b=0,p=[];b<s.length;b++)n=s[b],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(p.length)p.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],o=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(o=!1)}o&&(c.splice(t--,1),e=n(n.s=a[0]))}return e}var o={},r={app:0},c=[];function n(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=o,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/botify-web-vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=i;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"3cfd":function(e,t,a){},4769:function(e,t,a){},"518e":function(e,t,a){"use strict";a("d66d")},"56d7":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const r={id:"nav"},c=Object(o["createElementVNode"])("i",{class:"bi bi-house-door-fill"},null,-1),n=Object(o["createTextVNode"])(" Home"),s=Object(o["createTextVNode"])(" | "),i=Object(o["createElementVNode"])("i",{class:"bi bi-plus-square-fill"},null,-1),l=Object(o["createTextVNode"])(" Hinzufügen");function d(e,t,a,d,b,p){const m=Object(o["resolveComponent"])("router-link"),u=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(m,{to:"/",class:"router-link"},{default:Object(o["withCtx"])(()=>[c,n]),_:1}),s,Object(o["createVNode"])(m,{to:"/bot/add",class:"router-link"},{default:Object(o["withCtx"])(()=>[i,l]),_:1})]),Object(o["createVNode"])(u)],64)}var b={name:"App",metaInfo:{title:"Botify"}},p=(a("be08"),a("6b0d")),m=a.n(p);const u=m()(b,[["render",d]]);var h=u,O=a("6605");const j=e=>(Object(o["pushScopeId"])("data-v-4c44f3da"),e=e(),Object(o["popScopeId"])(),e),v={class:"container home-wrapper"},f={class:"home-header"},g=j(()=>Object(o["createElementVNode"])("h2",{class:"page-title"},"Bot Übersicht:",-1)),N={key:0},_=j(()=>Object(o["createElementVNode"])("i",{class:"bi bi-caret-up-fill"},null,-1)),V=Object(o["createTextVNode"])(" Filter "),E=[_,V],y=j(()=>Object(o["createElementVNode"])("div",{class:"input-group mb-3 home-filter"},[Object(o["createElementVNode"])("input",{type:"text",class:"form-control",id:"botId",placeholder:"FZ***"}),Object(o["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button"},"Filter")],-1)),D={key:1},w=j(()=>Object(o["createElementVNode"])("i",{class:"bi bi-caret-down-fill"},null,-1)),k=Object(o["createTextVNode"])(" Filter "),B=[w,k],S={class:"home-content"};function x(e,t,a,r,c,n){const s=Object(o["resolveComponent"])("BotCard");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",v,[Object(o["createElementVNode"])("div",f,[g,c.showFilter?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,[Object(o["createElementVNode"])("div",{class:"toggle-filter-btn",onClick:t[0]||(t[0]=e=>n.toggleFilter())},E),y])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[Object(o["createElementVNode"])("div",{class:"toggle-filter-btn",onClick:t[1]||(t[1]=e=>n.toggleFilter())},B)]))]),Object(o["createElementVNode"])("div",S,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.botData,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.id,data:e},null,8,["data"]))),128))])])}a("14d9");const C={class:"name"},T={class:"last_state"},F={class:"status"};function I(e,t,a,r,c,n){const s=Object(o["resolveComponent"])("Countdown");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:"card",class:Object(o["normalizeClass"])(n.is_active(c.componentData.last_state)),onClick:t[0]||(t[0]=e=>n.open_details(c.componentData.name))},[Object(o["createElementVNode"])("div",C,Object(o["toDisplayString"])(c.componentData.id)+" / "+Object(o["toDisplayString"])(c.componentData.name),1),Object(o["createElementVNode"])("div",T,Object(o["toDisplayString"])(c.componentData.last_state),1),Object(o["createElementVNode"])("div",F,Object(o["toDisplayString"])(c.componentData.status),1),Object(o["createVNode"])(s,{startTime:n.get_seconds(c.componentData.last_state),active:n.is_active(c.componentData.last_state)},null,8,["startTime","active"])],2)}function M(e,t,a,r,c,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:"circle",class:Object(o["normalizeClass"])("inactive"==a.active?"inactive":"active")}," VOR "+Object(o["toDisplayString"])(this.timer)+" SEK ",3)}var A={name:"Countdown",data(){return{timer:this.startTime}},props:{startTime:Number,active:String},methods:{countDownTimer(){setTimeout(()=>{this.timer+=1,this.countDownTimer(),this.triggerReload()},1e3)},triggerReload(){90==this.timer&&this.$parent.reload()}},created(){this.countDownTimer()}};a("92df");const z=m()(A,[["render",M],["__scopeId","data-v-013892ac"]]);var L=z,H={name:"HelloWorld",components:{Countdown:L},props:{data:{type:Object}},data(){return{componentData:this.data}},methods:{get_seconds(e){try{var t=new Date;const p=e.split(","),m=p[0].split(".");var a=m[0].trim(),o=m[1].trim(),r=m[2].trim();const u=p[1].split(":");var c=u[0].trim(),n=u[1].trim(),s=u[2].trim(),i=new Date(r,parseInt(o)-1,a,c,n,s,0),l=i.getTime()-t.getTime(),d=l/1e3,b=Math.abs(Math.round(d));return b}catch{return 0}},is_active(e){var t=e,a=this.get_seconds(t);return a>90?"inactive":"active"},open_details(e){this.$router.push({name:"BotView",params:{name:e}})},reload(){this.$parent.readBots()}}};a("c09f");const P=m()(H,[["render",I],["__scopeId","data-v-19bfcfd2"]]);var R=P,Z=a("4f60");a("256a"),a("1862");const K={apiKey:"AIzaSyANxIKzjNVJ-sZKYZ6VxLpMifuZ4tpA6Xw",authDomain:"robat-1c1a8.firebaseapp.com",databaseURL:"https://robat-1c1a8.firebaseio.com",projectId:"robat-1c1a8",storageBucket:"robat-1c1a8.appspot.com",messagingSenderId:"343068274490",appId:"1:343068274490:web:3756bfea112481a587ea03",measurementId:"G-R065CS48NG"};Z["a"].initializeApp(K);var $=Z["a"].firestore();const G=$.collection("bots");var J={data(){return{showFilter:!1,botData:[]}},name:"Home",components:{BotCard:R},methods:{remove_all_bots(){const e=document.querySelectorAll("#card");e.forEach(e=>{e.remove()})},readBots(){this.botData=[],G.onSnapshot(e=>(this.remove_all_bots(),e.forEach(e=>{this.botData.push(e.data())}),this.botData))},toggleFilter(){0==this.showFilter?this.showFilter=!0:this.showFilter=!1}},beforeMount(){this.readBots()}};a("518e");const U=m()(J,[["render",x],["__scopeId","data-v-4c44f3da"]]);var q=U;const W=e=>(Object(o["pushScopeId"])("data-v-4001efbb"),e=e(),Object(o["popScopeId"])(),e),X={class:"container"},Y={class:"botview"},Q={class:"botview-header"},ee={class:"page-title buttonGrup"},te={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},ae={class:"breadcrumb"},oe=W(()=>Object(o["createElementVNode"])("li",{class:"breadcrumb-item"},[Object(o["createElementVNode"])("a",{href:"#"},"Übersicht")],-1)),re={class:"breadcrumb-item active","aria-current":"page"},ce={class:"botview-hdg"},ne={class:"page-title"},se={class:"charts"},ie={class:"botview-content"},le={style:{"border-collapse":"collapse",width:"100%"}},de=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Anzahl Neustarts:",-1)),be={id:"restarts"},pe=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Letzter Status:",-1)),me=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Status:",-1)),ue={id:"state"},he=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Log:",-1)),Oe={id:"log"},je=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Aktiv seit:",-1)),ve={id:"time_active"},fe=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Alle Fehler bisher:",-1)),ge={id:"errors"},Ne=W(()=>Object(o["createElementVNode"])("td",{class:"header"},"Mehr Infos",-1)),_e={id:"more"};function Ve(e,t,a,r,c,n){const s=Object(o["resolveComponent"])("apexchart");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,[Object(o["createElementVNode"])("div",Y,[Object(o["createElementVNode"])("div",Q,[Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("nav",te,[Object(o["createElementVNode"])("ol",ae,[oe,Object(o["createElementVNode"])("li",re,"Botview "+Object(o["toDisplayString"])(e.$route.params.name),1)])])]),Object(o["createElementVNode"])("div",ce,[Object(o["createElementVNode"])("h2",ne,"Botview "+Object(o["toDisplayString"])(e.$route.params.name),1),Object(o["createElementVNode"])("h3",{class:Object(o["normalizeClass"])(n.is_active(n.get_seconds(c.botData.last_state)))},Object(o["toDisplayString"])(c.counter)+" SEK",3)])]),Object(o["createElementVNode"])("div",se,[Object(o["createVNode"])(s,{type:"pie",width:"380",options:c.pieChartOptions,series:c.pieSeries,ref:"piechart"},null,8,["options","series"]),Object(o["createVNode"])(s,{width:"380",type:"line",options:c.lineChartOptions,series:c.series,ref:"linechart"},null,8,["options","series"])]),Object(o["createElementVNode"])("div",ie,[Object(o["createElementVNode"])("table",le,[Object(o["createElementVNode"])("tbody",null,[Object(o["createElementVNode"])("tr",null,[de,Object(o["createElementVNode"])("td",be,Object(o["toDisplayString"])(c.botData.automated_restarts),1)]),Object(o["createElementVNode"])("tr",null,[pe,Object(o["createElementVNode"])("td",{id:"last_state",class:Object(o["normalizeClass"])(n.is_active(n.get_seconds(c.botData.last_state)))},Object(o["toDisplayString"])(c.botData.last_state),3)]),Object(o["createElementVNode"])("tr",null,[me,Object(o["createElementVNode"])("td",ue,Object(o["toDisplayString"])(c.botData.status),1)]),Object(o["createElementVNode"])("tr",null,[he,Object(o["createElementVNode"])("td",Oe,Object(o["toDisplayString"])(c.botData.log),1)]),Object(o["createElementVNode"])("tr",null,[je,Object(o["createElementVNode"])("td",ve,Object(o["toDisplayString"])(c.botData.started),1)]),Object(o["createElementVNode"])("tr",null,[fe,Object(o["createElementVNode"])("td",ge,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.botData.errors)+" ",1),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.botData.errors,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",{key:e}))),128))])]),Object(o["createElementVNode"])("tr",null,[Ne,Object(o["createElementVNode"])("td",_e,Object(o["toDisplayString"])(c.botData.description),1)])])])])])])}const Ee=$.collection("bots");var ye={name:"Botview",props:{name:String},data(){return{botData:{},counter:0,startTime:6,pieSeries:[100,0],pieChartOptions:{chart:{width:380,type:"pie"},labels:["Automatische Neustarts","Laufzeit"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:[{name:"Ausfälle pro Stunde",data:[]}],lineChartOptions:{chart:{type:"area",height:350,zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Ausfälle von "+this.name,align:"left"},subtitle:{text:"pro Stunde",align:"left"},labels:[],xaxis:{type:"string"},yaxis:{opposite:!0},legend:{horizontalAlign:"left"}}}},methods:{readBot(){try{Ee.doc(this.name).onSnapshot(e=>(this.botData=e.data(),this.counter=this.get_seconds(this.botData.last_state),this.add_data_to_pie_serie(),this.add_data_to_line_serie(),this.botData))}catch{return this.botData}},total_to_percent(e){return 870/e*100},get_error_per_hour(e){let t=0;for(let a=0;a<this.botData.errors.length;a++){let o=this.botData.errors[a].error_time,r=o.substring(0,2);r==e&&(t+=1)}return t},get_now_hour(){return(new Date).getHours()},add_data_to_line_serie(){let e=[],t=[];for(let a=this.startTime;a<=this.get_now_hour();a++)a?(t.includes(a)||t.push(a+" Uhr"),e.push(this.get_error_per_hour(a))):console.log("FEHLER BEI: "+a);this.series[0].data=e,this.lineChartOptions.labels=t,this.lineChartOptions={labels:t}},add_data_to_pie_serie(){this.pieSeries[1]=this.total_to_percent(this.botData.automated_restarts)},get_seconds(e){try{var t=new Date;const p=e.split(","),m=p[0].split(".");var a=m[0].trim(),o=m[1].trim(),r=m[2].trim();const u=p[1].split(":");var c=u[0].trim(),n=u[1].trim(),s=u[2].trim(),i=new Date(r,parseInt(o)-1,a,c,n,s,0),l=i.getTime()-t.getTime(),d=l/1e3,b=Math.abs(Math.round(d));return b}catch(p){return 0}},is_active(e){return e>90?"inactive":"active"},countDownTimer(){setTimeout(()=>{this.counter+=1,this.countDownTimer()},1e3)}},created(){this.countDownTimer()},beforeMount(){this.readBot()}};a("6933");const De=m()(ye,[["render",Ve],["__scopeId","data-v-4001efbb"]]);var we=De;const ke=e=>(Object(o["pushScopeId"])("data-v-d464d7dc"),e=e(),Object(o["popScopeId"])(),e),Be={class:"container"},Se=ke(()=>Object(o["createElementVNode"])("div",{class:"addbot-header"},[Object(o["createElementVNode"])("h2",{class:"page-title"},"Füge einen Bot hinzu:")],-1)),xe={class:"addbot-content container"},Ce={class:"form text-center"},Te=Object(o["createStaticVNode"])('<div class="form-floating mb-4" data-v-d464d7dc><input type="text" class="form-control" id="botName" placeholder="Name" data-v-d464d7dc><label for="botName" class="form-label" data-v-d464d7dc>Name</label></div><div class="form-floating mb-4" data-v-d464d7dc><input type="text" class="form-control" id="botId" placeholder="FZ***" data-v-d464d7dc><label for="botId" class="form-label" data-v-d464d7dc>FZ***</label></div><div class="form-floating mb-4" data-v-d464d7dc><textarea class="form-control textfield" placeholder="Dies ist eine Beschreibung..." id="floatingTextarea" style="height:100px;" data-v-d464d7dc></textarea><label for="floatingTextarea" data-v-d464d7dc>Dies ist eine Beschreibung...</label></div>',3),Fe={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},Ie=ke(()=>Object(o["createElementVNode"])("strong",null,"Ups! ",-1)),Me=Object(o["createTextVNode"])("Diese Funktion steht noch nicht zur Verfügung! ");function Ae(e,t,a,r,c,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Be,[Se,Object(o["createElementVNode"])("div",xe,[Object(o["createElementVNode"])("div",Ce,[Te,Object(o["createElementVNode"])("button",{type:"button",class:"form-button",onClick:t[0]||(t[0]=e=>n.showMessageFunc())},"Speichern")])]),c.showMessage?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Fe,[Ie,Me,Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:t[1]||(t[1]=e=>n.hideMessageFunc())})])):Object(o["createCommentVNode"])("",!0)])}var ze={name:"AddBot",components:{},data(){return{showMessage:!1}},methods:{showMessageFunc(){this.showMessage=!0},hideMessageFunc(){this.showMessage=!1}}};a("780f");const Le=m()(ze,[["render",Ae],["__scopeId","data-v-d464d7dc"]]);var He=Le;const Pe=[{path:"/",name:"Home",component:q},{path:"/bot/:name",name:"BotView",component:we,props:!0},{path:"/bot/add",name:"AddBot",component:He}],Re=Object(O["a"])({history:Object(O["b"])(),linkExactActiveClass:"active",routes:Pe});var Ze=Re,Ke=a("ae27"),$e=a.n(Ke);a("ab8b"),a("7b17"),a("cd74");const Ge=Object(o["createApp"])(h);Ge.use(Ze),Ge.use($e.a),Ge.mount("#app")},6933:function(e,t,a){"use strict";a("3cfd")},"780f":function(e,t,a){"use strict";a("8077")},8077:function(e,t,a){},"92df":function(e,t,a){"use strict";a("f310")},be08:function(e,t,a){"use strict";a("fe09")},c09f:function(e,t,a){"use strict";a("4769")},d66d:function(e,t,a){},f310:function(e,t,a){},fe09:function(e,t,a){}});
//# sourceMappingURL=app.b4982fb8.js.map